{% extends "finance/base.html" %}
{% load static %}

{% block body %}

<div class="pusher">
  <div class="ui vertical stripe segment">
    <div class="ui middle aligned stackable grid container">
      <div class="row">
        <div class="eight wide column">
          <div class="ui container">
            <form method="post" class="ui form" id="category_form">
              {% csrf_token %}
              {{ form.as_p }}
              <div class="fluid ui big buttons">
                <button class="ui button primary" type="submit" form="category_form">
                  Save
                </button>
                <div class="or"></div>
                {% if object %}
                <a class="ui button red" href="{% url 'finance:category_delete' pk=object.pk %}">
                  Delete
                </a>
                <div class="or"></div>
                {% endif %}
                <a class="ui button" href="{% url 'finance:categories' %}">
                  Cancel
                </a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  
<script>
  $('.ui.dropdown').dropdown();
  $('input[name=timestamp]').datetimepicker(
    {
      inline:false,
      format: 'Y-m-d H:i'
    });
      
  {% if object %}
  $('[data-value={{ object.type }}').addClass('active');
  $('input[name=type]').val('{{ object.type}}');
  {% endif %}
  
  let selectType = el => {
    $(el).addClass('active')
    .siblings().removeClass('active')
    $('input[name=type]').val($(el).data('value'));
  }
</script>
{% endblock %}