{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}

<div class="ui calendar">
  <div class="ui input left icon">
    <i class="calendar icon"></i>
    <input 
      type="text" 
      name="{{ widget.name }}" 
      placeholder="{{ widget.placeholder|capfirst }}"
      {% if type == "date" %}
      value="{{ widget.value|date:"SHORT_DATE_FORMAT" }}"
      {% else %}
      value="{{ widget.value|date:"c" }}"
      {% endif %}
      >
  </div>
</div>
<script type="text/javascript" charset="utf-8">
  $('[name={{widget.name}}]').parent().parent().calendar(
    {
      type:"{{ type }}",
      today: true,
      ampm: false,
      formatInput: true,
      formatter: {
        date: function (date, settings) {
          if (!date) return '';
          {% for code, name, flag, js_locale in LANGUAGE_EXTRAS %}
          {% if code == LANGUAGE_CODE %}
          return date.toLocaleDateString("{{ js_locale }}");
          {% endif %}
          {% endfor %}
        }
      }
    }
    
  );
</script>